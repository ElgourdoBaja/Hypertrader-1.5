{"ast":null,"code":"import React,{useState,useEffect}from'react';import{LineChart,Line,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer}from'recharts';import axios from'axios';import LoadingSpinner from'./LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MarketChart=_ref=>{let{coin='BTC'}=_ref;const[chartData,setChartData]=useState([]);const[loading,setLoading]=useState(true);const[timeframe,setTimeframe]=useState('1h');useEffect(()=>{fetchChartData();},[coin,timeframe]);const fetchChartData=async()=>{try{setLoading(true);const response=await axios.get(\"/api/candlesticks/\".concat(coin,\"?interval=\").concat(timeframe,\"&limit=50\"));if(response.data.success){const formattedData=response.data.data.map(candle=>({time:new Date(candle.timestamp).toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'}),price:candle.close,high:candle.high,low:candle.low,volume:candle.volume}));setChartData(formattedData);}}catch(error){console.error('Error fetching chart data:',error);}finally{setLoading(false);}};const formatTooltip=(value,name)=>{if(name==='price'){return[\"$\".concat(value.toLocaleString('en-US',{minimumFractionDigits:2})),'Price'];}return[value,name];};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"h-64 flex items-center justify-center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-white\",children:[coin,\" Price Chart\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:['1h','4h','1d'].map(tf=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTimeframe(tf),className:\"px-3 py-1 rounded text-xs font-medium transition-colors \".concat(timeframe===tf?'bg-blue-600 text-white':'bg-gray-700 text-gray-300 hover:bg-gray-600'),children:tf},tf))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(LineChart,{data:chartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#374151\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"time\",stroke:\"#9CA3AF\",fontSize:12}),/*#__PURE__*/_jsx(YAxis,{stroke:\"#9CA3AF\",fontSize:12,tickFormatter:value=>\"$\".concat(value.toLocaleString())}),/*#__PURE__*/_jsx(Tooltip,{formatter:formatTooltip,labelStyle:{color:'#1F2937'},contentStyle:{backgroundColor:'#1F2937',border:'1px solid #374151',borderRadius:'8px'}}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"price\",stroke:\"#3B82F6\",strokeWidth:2,dot:false,activeDot:{r:4,fill:'#3B82F6'}})]})})})]});};export default MarketChart;","map":{"version":3,"names":["React","useState","useEffect","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","axios","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","MarketChart","_ref","coin","chartData","setChartData","loading","setLoading","timeframe","setTimeframe","fetchChartData","response","get","concat","data","success","formattedData","map","candle","time","Date","timestamp","toLocaleTimeString","hour","minute","price","close","high","low","volume","error","console","formatTooltip","value","name","toLocaleString","minimumFractionDigits","className","children","tf","onClick","width","height","strokeDasharray","stroke","dataKey","fontSize","tickFormatter","formatter","labelStyle","color","contentStyle","backgroundColor","border","borderRadius","type","strokeWidth","dot","activeDot","r","fill"],"sources":["/app/frontend/src/components/MarketChart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport axios from 'axios';\nimport LoadingSpinner from './LoadingSpinner';\n\nconst MarketChart = ({ coin = 'BTC' }) => {\n  const [chartData, setChartData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [timeframe, setTimeframe] = useState('1h');\n\n  useEffect(() => {\n    fetchChartData();\n  }, [coin, timeframe]);\n\n  const fetchChartData = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/api/candlesticks/${coin}?interval=${timeframe}&limit=50`);\n      \n      if (response.data.success) {\n        const formattedData = response.data.data.map(candle => ({\n          time: new Date(candle.timestamp).toLocaleTimeString('en-US', {\n            hour: '2-digit',\n            minute: '2-digit'\n          }),\n          price: candle.close,\n          high: candle.high,\n          low: candle.low,\n          volume: candle.volume\n        }));\n        setChartData(formattedData);\n      }\n    } catch (error) {\n      console.error('Error fetching chart data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatTooltip = (value, name) => {\n    if (name === 'price') {\n      return [`$${value.toLocaleString('en-US', { minimumFractionDigits: 2 })}`, 'Price'];\n    }\n    return [value, name];\n  };\n\n  if (loading) {\n    return (\n      <div className=\"h-64 flex items-center justify-center\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-semibold text-white\">{coin} Price Chart</h3>\n        <div className=\"flex space-x-2\">\n          {['1h', '4h', '1d'].map(tf => (\n            <button\n              key={tf}\n              onClick={() => setTimeframe(tf)}\n              className={`px-3 py-1 rounded text-xs font-medium transition-colors ${\n                timeframe === tf\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n              }`}\n            >\n              {tf}\n            </button>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"h-64\">\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <LineChart data={chartData}>\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#374151\" />\n            <XAxis \n              dataKey=\"time\" \n              stroke=\"#9CA3AF\"\n              fontSize={12}\n            />\n            <YAxis \n              stroke=\"#9CA3AF\"\n              fontSize={12}\n              tickFormatter={(value) => `$${value.toLocaleString()}`}\n            />\n            <Tooltip \n              formatter={formatTooltip}\n              labelStyle={{ color: '#1F2937' }}\n              contentStyle={{ \n                backgroundColor: '#1F2937', \n                border: '1px solid #374151',\n                borderRadius: '8px'\n              }}\n            />\n            <Line \n              type=\"monotone\" \n              dataKey=\"price\" \n              stroke=\"#3B82F6\" \n              strokeWidth={2}\n              dot={false}\n              activeDot={{ r: 4, fill: '#3B82F6' }}\n            />\n          </LineChart>\n        </ResponsiveContainer>\n      </div>\n    </div>\n  );\n};\n\nexport default MarketChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}